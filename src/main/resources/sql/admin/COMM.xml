<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="COMM">
	<select id="getMenu" parameterType="HashMap" resultType="HashMap">
		SELECT
			  SEQ
			, MENUNAME
			, MENULEVEL
			, MENUCATEGORY
			, MENULINK
			, MENUAUTH
			, USEYN
		FROM 
			MENU
		WHERE 1=1
			AND USEYN = 'Y'
			<if test="menuLevel == 0">
			AND MENULEVEL = '0'
			</if>
			<if test="menuLevel != 0">
			AND MENULEVEL != '0'
			</if>
			AND MENUGBN ='A'
	</select>
	
	<select id="getAdminMenuList" parameterType="HashMap" resultType="HashMap">
		SELECT
				*
		FROM (
				SELECT
						  A.*
						, ROWNUM AS RNUM
						, COUNT (*) OVER() AS TOTCONT
				FROM (
						SELECT
							  SEQ
							, MENUNAME
							, MENULEVEL
							, MENUCATEGORY
							, MENULINK
							, MENUAUTH
							, USEYN
						FROM 
							MENU
						WHERE 1=1	
						AND MENUGBN ='A'
						ORDER BY SEQ ASC
					) A
			)
    	WHERE 1=1
    		<![CDATA[
    			AND RNUM >= #{startCount} AND RNUM <= #{endCount}
    		]]>
	</select>
</mapper>